<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="doc-style.css" />
  <script src="doc-filelist.js"></script>
  <script>
    var relativeDir = "";
    var thisFile = "home/alex/github/node-error/README.md";
    var defaultSidebar = true;
  </script>
  <script src="doc-script.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1.0" /></head>
<body>
  <nav>
<div class="logo"><a href="http://alinex.github.io"
  onmouseover="logo.src='https://alinex.github.io/images/Alinex-200.png'"
  onmouseout="logo.src='https://alinex.github.io/images/Alinex-black-200.png'">
  <img name="logo" src="https://alinex.github.io/images/Alinex-black-200.png"
    width="150" title="Alinex Universe Homepage" />
  </a>
  <img src="http://alinex.github.io/images/Alinex-200.png"
    style="display:none" alt="preloading" />
</div>
<div class="links">
  <a href="http://alinex.github.io/blog"
    class="btn btn-primary"><span class="glyphicon-pencil"></span> Blog</a>
  <a href="http://alinex.github.io/develop"
    class="btn btn-primary"><span class="glyphicon-book"></span> Develop</a>
  <a href="http://alinex.github.io/code.html"
    class="btn btn-warning"><span class="glyphicon-cog"></span> Code</a>
</div>
</nav><div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#package-alinex-error">Package: alinex-error</a>
      </div>

      <div class="heading h2">
        <a href="#possible-output">Possible Output</a>
      </div>

      <div class="heading h3">
        <a href="#only-the-real-error-message">Only the real error message</a>
      </div>

      <div class="heading h3">
        <a href="#show-error-message-with-possible-details">Show error message with possible details</a>
      </div>

      <div class="heading h3">
        <a href="#default-stack-trace">Default stack trace</a>
      </div>

      <div class="heading h3">
        <a href="#stack-with-node_modules">Stack with node_modules</a>
      </div>

      <div class="heading h3">
        <a href="#stack-with-system">Stack with system</a>
      </div>

      <div class="heading h3">
        <a href="#full-stack-with-node_modules-and-system">Full stack with node_modules and system</a>
      </div>

      <div class="heading h3">
        <a href="#show-code-line">Show code line</a>
      </div>

      <div class="heading h3">
        <a href="#show-code-context">Show code context</a>
      </div>

      <div class="heading h3">
        <a href="#show-code-lines">Show code lines</a>
      </div>

      <div class="heading h3">
        <a href="#show-all-code-lines">Show all code lines</a>
      </div>

      <div class="heading h3">
        <a href="#show-also-compiled-code-lines">Show also compiled code lines</a>
      </div>

      <div class="heading h3">
        <a href="#show-error-with-cause">Show error with cause</a>
      </div>

      <div class="heading h3">
        <a href="#show-error-with-cause-array">Show error with cause array</a>
      </div>

      <div class="heading h3">
        <a href="#show-error-with-cause-hash">Show error with cause hash</a>
      </div>

      <div class="heading h3">
        <a href="#show-stack-with-error-cause">Show stack with error cause</a>
      </div>

      <div class="heading h2">
        <a href="#install">Install</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h3">
        <a href="#create-an-error">Create an error</a>
      </div>

      <div class="heading h3">
        <a href="#support-cause-error">Support cause error</a>
      </div>

      <div class="heading h3">
        <a href="#send-multiple-errors">Send multiple errors</a>
      </div>

      <div class="heading h2">
        <a href="#exit-process">Exit process</a>
      </div>

      <div class="heading h2">
        <a href="#configuration">Configuration</a>
      </div>

      <div class="heading h2">
        <a href="#license">License</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container" tabindex="0"><a id="fork" href="https://github.com/alinex/node-error.git" title="Fork me on GitHub"></a>
    <div class="docs markdown"><div class="pilwrap" id="package-alinex-error">
  <h1>
    <a href="#package-alinex-error" name="package-alinex-error" class="pilcrow"></a>
Package: alinex-error
  </h1>
</div>
<p><a href="https://travis-ci.org/alinex/node-error"><img src="https://travis-ci.org/alinex/node-error.svg?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/r/alinex/node-error?branch=master"><img src="https://coveralls.io/repos/alinex/node-error/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://gemnasium.com/alinex/node-error"><img src="https://gemnasium.com/alinex/node-error.png" alt="Dependency Status"></a></p>
<p>This will replace the standard error handler with one which will</p>
<ul>
<li>display code with context</li>
<li>use source-maps</li>
<li>support error nesting (multi level)</li>
<li>support individual loggers like winston...</li>
<li>colorize and highlight the output</li>
</ul>
<p>For the normal use it is really simple and only have to be loaded and installed
once in your application.</p>
<blockquote>
<p>It is one of the modules of the <a href="http://alinex.github.io/code.html">Alinex Universe</a>
following the code standards defined in the <a href="http://alinex.github.io/node-alinex">General Docs</a>.</p>
</blockquote>
<div class="pilwrap" id="possible-output">
  <h2>
    <a href="#possible-output" name="possible-output" class="pilcrow"></a>
Possible Output
  </h2>
</div>
<p>Keep in mind that the colors here won't match the ones really displayed on your
output:</p>
<pre><code class="text">ReferenceError: comand is not defined
  at /home/alex/a3/node-make/lib/pushTask.js:111:82
     /home/alex/a3/node-make/src/pushTask.coffee:95:44
     093:     execFile &quot;git&quot;, [
     094:       'commit'
     095:       '-m', &quot;Added information for version #{comand.newVersion}&quot;
     096:     ], { cwd: command.dir }, (err, stdout, stderr) -&gt;
     097:       console.log stdout.trim().grey if stdout and commander.verbose
Exiting after error logging timeout.
</code></pre>
<p>You may change the output in different ways using the configuration. Below are
some output examples for different configurations (keep in mind the colors
displayed here won't match).</p>
<div class="pilwrap" id="only-the-real-error-message">
  <h3>
    <a href="#only-the-real-error-message" name="only-the-real-error-message" class="pilcrow"></a>
Only the real error message
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>, properties: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
</code></pre>
<div class="pilwrap" id="show-error-message-with-possible-details">
  <h3>
    <a href="#show-error-message-with-possible-details" name="show-error-message-with-possible-details" class="pilcrow"></a>
Show error message with possible details
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>, properties: <span class="hljs-literal">true</span>,
  stack: { view: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
Detail: The database is not working properly.
</code></pre>
<p>The additional information has to be added as properties of the error object.</p>
<div class="pilwrap" id="default-stack-trace">
  <h3>
    <a href="#default-stack-trace" name="default-stack-trace" class="pilcrow"></a>
Default stack trace
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:78:22)
</code></pre>
<div class="pilwrap" id="stack-with-node_modules">
  <h3>
    <a href="#stack-with-node_modules" name="stack-with-node_modules" class="pilcrow"></a>
Stack with node_modules
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">true</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:85:22)
  at callFn (/home/alex/a3/node-error/node_modules/mocha/lib/runnable.js:223:21)
  at Test.Runnable.run (/home/alex/a3/node-error/node_modules/mocha/lib/runnable.js:216:7)
  at Runner.runTest (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:374:10)
  at /home/alex/a3/node-error/node_modules/mocha/lib/runner.js:452:12
  at next (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:299:14)
  at /home/alex/a3/node-error/node_modules/mocha/lib/runner.js:309:7
  at next (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:247:23)
  at Object._onImmediate (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:276:5)
</code></pre>
<div class="pilwrap" id="stack-with-system">
  <h3>
    <a href="#stack-with-system" name="stack-with-system" class="pilcrow"></a>
Stack with system
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">true</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:93:22)
  at processImmediate [as _immediateCallback] (timers.js:330:15)
</code></pre>
<div class="pilwrap" id="full-stack-with-node_modules-and-system">
  <h3>
    <a href="#full-stack-with-node_modules-and-system" name="full-stack-with-node_modules-and-system" class="pilcrow"></a>
Full stack with node_modules and system
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">true</span>, system: <span class="hljs-literal">true</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:101:22)
  at callFn (/home/alex/a3/node-error/node_modules/mocha/lib/runnable.js:223:21)
  at Test.Runnable.run (/home/alex/a3/node-error/node_modules/mocha/lib/runnable.js:216:7)
  at Runner.runTest (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:374:10)
  at /home/alex/a3/node-error/node_modules/mocha/lib/runner.js:452:12
  at next (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:299:14)
  at /home/alex/a3/node-error/node_modules/mocha/lib/runner.js:309:7
  at next (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:247:23)
  at Object._onImmediate (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:276:5)
  at processImmediate [as _immediateCallback] (timers.js:330:15)
</code></pre>
<div class="pilwrap" id="show-code-line">
  <h3>
    <a href="#show-code-line" name="show-code-line" class="pilcrow"></a>
Show code line
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code:
   { view: <span class="hljs-literal">true</span>,
     before: <span class="hljs-number">0</span>,
     after: <span class="hljs-number">0</span>,
     compiled: <span class="hljs-literal">false</span>,
     modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
     08:   new Error &quot;Something went wrong&quot;
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:112:22)
</code></pre>
<div class="pilwrap" id="show-code-context">
  <h3>
    <a href="#show-code-context" name="show-code-context" class="pilcrow"></a>
Show code context
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code:
   { view: <span class="hljs-literal">true</span>,
     before: <span class="hljs-number">2</span>,
     after: <span class="hljs-number">2</span>,
     compiled: <span class="hljs-literal">false</span>,
     modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
     06:
     07: module.exports.returnError = -&gt;
     08:   new Error &quot;Something went wrong&quot;
     09:
     10: module.exports.returnCause = -&gt;
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:131:22)
</code></pre>
<div class="pilwrap" id="show-code-lines">
  <h3>
    <a href="#show-code-lines" name="show-code-lines" class="pilcrow"></a>
Show code lines
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code:
   { view: <span class="hljs-literal">true</span>,
     before: <span class="hljs-number">0</span>,
     after: <span class="hljs-number">0</span>,
     compiled: <span class="hljs-literal">false</span>,
     modules: <span class="hljs-literal">false</span>,
     all: <span class="hljs-literal">true</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
     08:   new Error &quot;Something went wrong&quot;
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:142:22)
     142: #      makedoc msg
</code></pre>
<div class="pilwrap" id="show-all-code-lines">
  <h3>
    <a href="#show-all-code-lines" name="show-all-code-lines" class="pilcrow"></a>
Show all code lines
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">true</span>, system: <span class="hljs-literal">false</span> },
  code:
   { view: <span class="hljs-literal">true</span>,
     before: <span class="hljs-number">0</span>,
     after: <span class="hljs-number">0</span>,
     compiled: <span class="hljs-literal">false</span>,
     modules: <span class="hljs-literal">true</span>,
     all: <span class="hljs-literal">true</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
     08:   new Error &quot;Something went wrong&quot;
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:152:22)
     152: undefined
  at callFn (/home/alex/a3/node-error/node_modules/mocha/lib/runnable.js:223:21)
     223:     var result = fn.call(ctx);
  at Test.Runnable.run (/home/alex/a3/node-error/node_modules/mocha/lib/runnable.js:216:7)
     216:       callFn(this.fn);
  at Runner.runTest (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:374:10)
     374:     test.run(fn);
  at /home/alex/a3/node-error/node_modules/mocha/lib/runner.js:452:12
     452:       self.runTest(function(err){
  at next (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:299:14)
     299:       return fn();
  at /home/alex/a3/node-error/node_modules/mocha/lib/runner.js:309:7
     309:       next(suites.pop());
  at next (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:247:23)
     247:     if (!hook) return fn();
  at Object._onImmediate (/home/alex/a3/node-error/node_modules/mocha/lib/runner.js:276:5)
     276:     next(0);
</code></pre>
<div class="pilwrap" id="show-also-compiled-code-lines">
  <h3>
    <a href="#show-also-compiled-code-lines" name="show-also-compiled-code-lines" class="pilcrow"></a>
Show also compiled code lines
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">true</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">false</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.js:8:12)
     08:     return new Error(&quot;Something went wrong&quot;);
     Object.module.exports.returnError (/home/alex/a3/node-error/test/data/object.coffee:8:6)
     08:   new Error &quot;Something went wrong&quot;
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/default.coffee:167:22)
</code></pre>
<div class="pilwrap" id="show-error-with-cause">
  <h3>
    <a href="#show-error-with-cause" name="show-error-with-cause" class="pilcrow"></a>
Show error with cause
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">true</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  Caused by Error: root fault (somethere)
</code></pre>
<div class="pilwrap" id="show-error-with-cause-array">
  <h3>
    <a href="#show-error-with-cause-array" name="show-error-with-cause-array" class="pilcrow"></a>
Show error with cause array
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">true</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  Caused by Error: root fault 1 (somethere)
  Caused by Error: root fault 2 (somethere)
</code></pre>
<div class="pilwrap" id="show-error-with-cause-hash">
  <h3>
    <a href="#show-error-with-cause-hash" name="show-error-with-cause-hash" class="pilcrow"></a>
Show error with cause hash
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">true</span>, stack: <span class="hljs-literal">false</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  Caused by Error: root fault 1 (here)
  Caused by Error: root fault 2 (there)
</code></pre>
<div class="pilwrap" id="show-stack-with-error-cause">
  <h3>
    <a href="#show-stack-with-error-cause" name="show-stack-with-error-cause" class="pilcrow"></a>
Show stack with error cause
  </h3>
</div>
<p>Configuration:</p>
<pre><code class="javascript">{ colors: <span class="hljs-literal">false</span>,
  stack: { view: <span class="hljs-literal">true</span>, modules: <span class="hljs-literal">false</span>, system: <span class="hljs-literal">false</span> },
  code: { view: <span class="hljs-literal">false</span>, before: <span class="hljs-number">0</span>, after: <span class="hljs-number">0</span>, compiled: <span class="hljs-literal">false</span>, all: <span class="hljs-literal">false</span>, modules: <span class="hljs-literal">false</span> },
  cause: { view: <span class="hljs-literal">true</span>, stack: <span class="hljs-literal">true</span> },
  uncaught: { exit: <span class="hljs-literal">true</span>, timeout: <span class="hljs-number">100</span>, code: <span class="hljs-number">2</span> } }
</code></pre>
<p>Error message:</p>
<pre><code class="text">Error: Something went wrong
  at Object.module.exports.returnCause (/home/alex/a3/node-error/test/data/object.js:13:11)
     Object.module.exports.returnCause (/home/alex/a3/node-error/test/data/object.coffee:11:12)
  at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/cause.coffee:105:22)
  Caused by Error: root fault (somethere)
    at Object.module.exports.returnCause (/home/alex/a3/node-error/test/data/object.js:14:17)
       Object.module.exports.returnCause (/home/alex/a3/node-error/test/data/object.coffee:12:18)
    at Context.&lt;anonymous&gt; (/home/alex/a3/node-error/test/run/cause.coffee:105:22)
</code></pre>
<div class="pilwrap" id="install">
  <h2>
    <a href="#install" name="install" class="pilcrow"></a>
Install
  </h2>
</div>
<p><a href="https://www.npmjs.com/package/alinex-error"><img src="https://nodei.co/npm/alinex-error.png?downloads=true&amp;downloadRank=true&amp;stars=true" alt="NPM">
<img src="https://nodei.co/npm-dl/alinex-error.png?months=9&amp;height=3" alt="Downloads">
</a></p>
<p>The easiest way is to let npm add the module directly to your modules
(from within you node modules directory):</p>
<pre><code class="sh">npm install alinex-error --save
</code></pre>
<p>And update it to the latest version later:</p>
<pre><code class="sh">npm update alinex-error --save
</code></pre>
<p>Always have a look at the latest <a href="Changelog.md.html.html">changes</a>.</p>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div>
<p>To use the error handler it should be added for uncaught exceptions in the
main routine using:</p>
<pre><code class="coffee">errorHandler = <span class="hljs-built_in">require</span> <span class="hljs-string">'alinex-error'</span>
</code></pre>
<p>Or the same in one statement:</p>
<pre><code class="coffee">errorHandler = <span class="hljs-built_in">require</span>(<span class="hljs-string">'alinex-error'</span>).install()
</code></pre>
<p>This will capture the error, log it and stop processing if one occurs.</p>
<p>Alternatively an already caught Error may be reported using:</p>
<pre><code class="coffee">errorHandler.report error
errorHandler.report error, level
</code></pre>
<p>or retrieved as formatted string using:</p>
<pre><code class="coffee">errorHandler.format error
</code></pre>
<p>The error may have some nested errors in it's <code>cause</code> property. Also a
<code>codePart</code> property may give a hint where the error comes from.</p>
<div class="pilwrap" id="create-an-error">
  <h3>
    <a href="#create-an-error" name="create-an-error" class="pilcrow"></a>
Create an error
  </h3>
</div>
<p>You may always throw an error the same way using:</p>
<pre><code class="coffee"><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Message"</span>
</code></pre>
<p>You may also report any object as error like:</p>
<pre><code class="coffee">errorHandler.report <span class="hljs-string">"Something went wrong!"</span>
</code></pre>
<div class="pilwrap" id="support-cause-error">
  <h3>
    <a href="#support-cause-error" name="support-cause-error" class="pilcrow"></a>
Support cause error
  </h3>
</div>
<p>If you catch an error and rethrow it you may use:</p>
<pre><code class="coffee">    <span class="hljs-keyword">try</span>
      ...
    <span class="hljs-keyword">catch</span> ex
      err = <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Something went wrong!"</span>
      err.cause = ex
      err.codePart = <span class="hljs-string">"input-1"</span>
</code></pre>
<p>This ensures that the new error will be reported but also with it's real cause.</p>
<div class="pilwrap" id="send-multiple-errors">
  <h3>
    <a href="#send-multiple-errors" name="send-multiple-errors" class="pilcrow"></a>
Send multiple errors
  </h3>
</div>
<p>That's done the same way as an error with another error as cause. You create a
new error instance and add all your different real errors as the <code>cause</code> array:</p>
<pre><code class="coffee">errList = doSomething()
err = <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Something went wrong!"</span>
err.cause = errList
</code></pre>
<p>If this resulting error will be reported it is done with all the causes if
enabled in configuration. The cause-list may be an array or an associative
array.</p>
<div class="pilwrap" id="exit-process">
  <h2>
    <a href="#exit-process" name="exit-process" class="pilcrow"></a>
Exit process
  </h2>
</div>
<p>If <code>uncaught.exit</code> is set the process is stopped after an uncaught error is
reported. The process will wait the defined <code>timeout</code> to finish the last write
operations and exit with the code from <code>err.code</code> or the specified default error
code.</p>
<div class="pilwrap" id="configuration">
  <h2>
    <a href="#configuration" name="configuration" class="pilcrow"></a>
Configuration
  </h2>
</div>
<p>To configure the output you may set values within the exported config
structure:</p>
<pre><code class="coffee">errorHandler.config =
  <span class="hljs-attribute">colors</span>: <span class="hljs-literal">true</span>          <span class="hljs-comment"># should colors be allowed on console output</span>

  <span class="hljs-comment"># Define whether and which stack lines to show</span>
  <span class="hljs-attribute">stack</span>:
    <span class="hljs-attribute">view</span>: <span class="hljs-literal">true</span>          <span class="hljs-comment"># show stack trace or not</span>
    <span class="hljs-attribute">modules</span>: <span class="hljs-literal">false</span>      <span class="hljs-comment"># show node_module trace</span>
    <span class="hljs-attribute">system</span>: <span class="hljs-literal">false</span>       <span class="hljs-comment"># show system module trace</span>

  <span class="hljs-comment"># Define if and how much code to show</span>
  <span class="hljs-attribute">code</span>:
    <span class="hljs-attribute">view</span>: <span class="hljs-literal">true</span>          <span class="hljs-comment"># view code sources or not</span>
    <span class="hljs-attribute">before</span>: <span class="hljs-number">2</span>           <span class="hljs-comment"># number of lines to show before the referenced one</span>
    <span class="hljs-attribute">after</span>: <span class="hljs-number">2</span>            <span class="hljs-comment"># number of lines to show after the referenced one</span>
    <span class="hljs-attribute">compiled</span>: <span class="hljs-literal">false</span>     <span class="hljs-comment"># show also code of compiled code</span>
    <span class="hljs-attribute">all</span>: <span class="hljs-literal">false</span>          <span class="hljs-comment"># show code of all lines or only the first</span>
    <span class="hljs-attribute">modules</span>: <span class="hljs-literal">false</span>      <span class="hljs-comment"># show code within node_modules</span>

  <span class="hljs-comment"># Display of the errors cause if there is one</span>
  <span class="hljs-attribute">cause</span>:
    <span class="hljs-attribute">view</span>: <span class="hljs-literal">true</span>          <span class="hljs-comment"># view caused errors</span>
    <span class="hljs-attribute">stack</span>: <span class="hljs-literal">true</span>         <span class="hljs-comment"># view also stack like on main error</span>

  <span class="hljs-comment"># Should command exit after an uncaught error is reported</span>
  <span class="hljs-attribute">uncaught</span>:
    <span class="hljs-attribute">exit</span>: <span class="hljs-literal">true</span>          <span class="hljs-comment"># should process be exited after uncaught error</span>
    <span class="hljs-attribute">timeout</span>: <span class="hljs-number">1000</span>       <span class="hljs-comment"># timeout to wait before exit to write logs</span>
    <span class="hljs-attribute">code</span>: <span class="hljs-number">2</span>             <span class="hljs-comment"># exit code to use</span>

  <span class="hljs-comment"># define a specific logger</span>
  <span class="hljs-attribute">logger</span>: <span class="hljs-built_in">console</span>
</code></pre>
<p>The above given values are the default values which you may change to customize
the output. As logger you may specify any logger like <code>console</code> or <code>winston</code> or
any other which have an <code>error()</code> method to call.</p>
<div class="pilwrap" id="license">
  <h2>
    <a href="#license" name="license" class="pilcrow"></a>
License
  </h2>
</div>
<p>Copyright 2013-2015 Alexander Schilling</p>
<p>Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<blockquote>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
</blockquote>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
</div>
  </div>
</body>
</html>
